Index: lib/breakoutex/persistent_leaderboard.ex
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>defmodule Breakoutex.PersistentLeaderboard do\n  use GenServer\n  require Logger\n\n  @default_db_name :leaderboard\n\n  def start_link(table_name) do\n    GenServer.start_link(__MODULE__, table_name, name: @default_db_name)\n  end\n\n  def stop(server \\\\ @default_db_name) do\n    GenServer.stop(server)\n  end\n\n  def ping(server \\\\ @default_db_name) do\n    case GenServer.whereis(server) do\n      pid when is_pid(pid) -> {:ok, pid}\n      _ -> {:error, :not_found}\n    end\n  end\n\n  def init(table_name) do\n    opts = [:set, :public, :named_table]\n    table = PersistentEts.new(table_name, Path.expand(\"./leaderboard2.db\"), opts)\n\n    {:ok, %{table: table}}\n  end\n\n  def save(%{player_name: player_name, score: score, level: level, current_user_id: current_user_id}) do\n    saved_info = {current_user_id, [score: score, time: NaiveDateTime.utc_now, level: level, player_name: player_name]}\n    Logger.info(inspect(saved_info))\n    :ets.insert(@default_db_name, saved_info)\n  end\n\n  def get_leaderboard() do\n    :ets.tab2list(@default_db_name)\n    |> IO.inspect()\n  end\nend\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/breakoutex/persistent_leaderboard.ex b/lib/breakoutex/persistent_leaderboard.ex
--- a/lib/breakoutex/persistent_leaderboard.ex	(revision 706f8451e0fc01ac4aa52145946393ca087b0566)
+++ b/lib/breakoutex/persistent_leaderboard.ex	(date 1609169178594)
@@ -3,6 +3,7 @@
   require Logger
 
   @default_db_name :leaderboard
+  @leaderboard_size 50
 
   def start_link(table_name) do
     GenServer.start_link(__MODULE__, table_name, name: @default_db_name)
